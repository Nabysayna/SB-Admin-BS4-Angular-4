{"version":3,"sources":["C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot-routing.module.ts","C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot.component.html","C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot.component.scss","C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot.component.ts","C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot.module.ts"],"names":[],"mappings":"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","file":"17.chunk.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { DemandedepotComponent } from './demandedepot.component';\r\n\r\nconst routes: Routes = [\r\n    { path: '', component: DemandedepotComponent }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class DemandedepotRoutingModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot-routing.module.ts","module.exports = \"<div [@routerTransition]>\\r\\n    <app-page-header [heading]=\\\"'Demande de depot'\\\" [icon]=\\\"'fa-table'\\\"></app-page-header>\\r\\n\\r\\n    <div class=\\\"row\\\" *ngIf=\\\"loading_data\\\" style=\\\"margin-top:3rem; position: fixed; z-index: 100; width: 100%; height: 100%; vertical-align:middle; background-color: white; opacity: 0.7\\\">\\r\\n        <img src=\\\"assets/images/loading_1.gif\\\" style=\\\"margin-left: 50%; margin-top: 19%; max-height: 10% !important;\\r\\n\\\"/>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" style=\\\"padding-bottom: 2rem\\\">\\r\\n        <div class=\\\"col-xs-12 col-sm-12\\\">\\r\\n\\r\\n            <div class=\\\"row\\\">\\r\\n                <table class=\\\"table table-hover table-responsive\\\">\\r\\n                    <tr style=\\\"text-align: right\\\">\\r\\n                        <th>#</th>\\r\\n                        <th>Date demande</th>\\r\\n                        <th>Entreprise</th>\\r\\n                        <th>Superviseur</th>\\r\\n                        <th>Téléphone</th>\\r\\n                        <th>Adresse</th>\\r\\n                        <th>Montant depot</th>\\r\\n                        <th>CC en charge</th>\\r\\n                        <th style=\\\"text-align: center\\\">Action</th>\\r\\n                    </tr>\\r\\n                    <tr *ngFor=\\\"let p of listedepositsencours; let i=index\\\" [ngStyle]=\\\"{'color': 'black', 'background-color': (p.etatdemande==0)?'red':(p.etatdemande==1)?'orange':'green'}\\\">\\r\\n                        <th>{{i+1}}</th>\\r\\n                        <td>{{p.datedemande}}</td>\\r\\n                        <td>{{p.infosup}}</td>\\r\\n                        <td>{{p.initiateur}}</td>\\r\\n                        <td>{{p.telephone}}</td>\\r\\n                        <td>{{p.adressecomplet}}</td>\\r\\n                        <td>{{p.montantdemande}}</td>\\r\\n                        <td>{{p.cc}}</td>\\r\\n                        <td>\\r\\n                            <button *ngIf=\\\"p.etatdemande==0\\\" type=\\\"button\\\" name=\\\"confirmerAffectationDepotCom-{{i}}\\\" id=\\\"confirmerAffectationDepotCom-{{i}}\\\" class=\\\"btn btn-primary\\\" (click)=\\\"confirmerAffectationDepotCom(p)\\\">Confirmer départ</button>\\r\\n                            <button *ngIf=\\\"p.etatdemande==1\\\" type=\\\"button\\\" name=\\\"validerRecuDepotCom-{{i}}\\\" id=\\\"validerRecuDepotCom-{{i}}\\\" class=\\\"btn btn-primary\\\" (click)=\\\"validerRecuDepotCom(p)\\\">Valider reception dépot</button>\\r\\n                            <strong *ngIf=\\\"p.etatdemande>1\\\" >Dépot effectué</strong>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                    <tr>\\r\\n                        <td colspan=\\\"8\\\" style=\\\"text-align: center; margin-top: 1rem\\\">\\r\\n                            <u *ngIf=\\\"listedepositsvalide.length!=0\\\" style=\\\"cursor: pointer\\\" (click)=\\\"showModalVoirplusdedemande(contentVoirplusdedemande)\\\" title=\\\"Voir plus de depot\\\">Voir dépots validé</u>\\r\\n                        </td>\\r\\n                    </tr>\\r\\n                </table>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n</div>\\r\\n\\r\\n\\r\\n<ng-template #contentVoirplusdedemande let-c=\\\"close\\\" let-d=\\\"dismiss\\\" >\\r\\n    <div class=\\\"modal-content\\\">\\r\\n        <div class=\\\"modal-header\\\">\\r\\n            <h4 class=\\\"modal-title pull-left\\\">Détail positionnement ({{listedepositsvalide.length}})</h4>\\r\\n            <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"d('Cross click')\\\">\\r\\n                <span aria-hidden=\\\"true\\\">&times;</span>\\r\\n            </button>\\r\\n        </div>\\r\\n        <div class=\\\"modal-body\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n                <div class=\\\"col-sm-12\\\">\\r\\n                    <div class=\\\"panel panel-default\\\">\\r\\n                        <table class=\\\"table table-hover table-responsive\\\">\\r\\n                            <tr>\\r\\n                                <th>#</th>\\r\\n                                <th>Date demande</th>\\r\\n                                <th>Entreprise</th>\\r\\n                                <th>Superviseur</th>\\r\\n                                <th>Téléphone</th>\\r\\n                                <th>Montant depot</th>\\r\\n                                <th>CC en charge</th>\\r\\n                            </tr>\\r\\n                            <tr *ngFor=\\\"let p of listedepositsvalide; let i=index\\\" [ngStyle]=\\\"{'color': 'black', 'background-color': (p.niveau_avancement==-4)?'red':(p.niveau_avancement==-3)?'orange':(p.niveau_avancement==-2)?'blue':(p.niveau_avancement==-1)?'pink':'green'}\\\">\\r\\n                                <td>{{i+1}}</td>\\r\\n                                <td>{{p.datedemande}}</td>\\r\\n                                <td>{{p.infosup}}</td>\\r\\n                                <td>{{p.initiateur}}</td>\\r\\n                                <td>{{p.telephone}}</td>\\r\\n                                <td style=\\\"text-align: right;\\\">{{tocurrency(p.montantdemande)}}</td>\\r\\n                                <td style=\\\"width: 200px\\\">{{p.cc}}</td>\\r\\n                            </tr>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</ng-template>\\r\\n\\r\\n\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot.component.html\n// module id = ../../../../../src/app/layout/demandedepot/demandedepot.component.html\n// module chunks = 17","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot.component.scss\n// module id = ../../../../../src/app/layout/demandedepot/demandedepot.component.scss\n// module chunks = 17","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport {Http} from \"@angular/http\";\r\nimport { routerTransition } from '../../router.animations';\r\nimport {UtilService} from \"../../services/util.service\";\r\n\r\n\r\nimport { NgbModal, ModalDismissReasons } from '@ng-bootstrap/ng-bootstrap';\r\nimport {AssignationSuiviService} from \"../../services/assignation-suivi.service\";\r\nimport {Router} from \"@angular/router\";\r\n\r\n\r\nimport {ApiPlatformService} from \"../../services/apiplateform.service\";\r\nimport {SuivipositionnementService} from \"../../services/suivipositionnement.service\";\r\n\r\n\r\n@Component({\r\n    selector: 'demandedepot-tables',\r\n    templateUrl: 'demandedepot.component.html',\r\n    styleUrls: ['demandedepot.component.scss'],\r\n    animations: [routerTransition()],\r\n    providers:[UtilService, AssignationSuiviService, SuivipositionnementService]\r\n})\r\nexport class DemandedepotComponent implements OnInit {\r\n\r\n    public loading_data:boolean = true;\r\n\r\n    constructor(public router: Router, private http: Http, private modalService: NgbModal, private _utilService: UtilService, private _assignationsuiviService:AssignationSuiviService, private _suivipositionnementService:SuivipositionnementService) {}\r\n\r\n    ngOnInit(): void {\r\n        this.loading_data = true;\r\n\r\n        this.getDemandeDepotForCom();\r\n        this.killsetinterval = setInterval(() => {\r\n            this.getDemandeDepotEncoursForCom();\r\n            console.log('step init');\r\n        }, 20000);\r\n    }\r\n\r\n\r\n    //////////////////////////////////////////////////////////////////////////////////////\r\n    //////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    public listedeposits:any[] = [];\r\n    public listedepositsencours:any[] = [];\r\n    public listedepositsvalide:any[] = [];\r\n    killsetinterval:any;\r\n\r\n\r\n    ngOnDestroy() {\r\n        clearInterval(this.killsetinterval);\r\n    }\r\n\r\n    getDemandeDepotForCom(){\r\n        console.log('getDemandeDepotForCom');\r\n        this._suivipositionnementService.getDemandeDepotForCom()\r\n            .subscribe(\r\n                data => {\r\n                    if(data.errorCode==0){\r\n                        this.listedeposits = data.message.map(function(type){\r\n                            return {\r\n                                datedemande: type.datedemande,\r\n                                adressecomplet: JSON.parse(type.initiateur.adresse).address+\", \"+JSON.parse(type.initiateur.adresse).souszone+\", \"+JSON.parse(type.initiateur.adresse).zone,\r\n                                montantdemande: type.montantdemande,\r\n                                cc: JSON.parse(type.validateur).prenom+\" \"+JSON.parse(type.validateur).nom,\r\n                                telephone: type.initiateur.telephone,\r\n                                initiateur: type.initiateur.prenom+' '+type.initiateur.nom,\r\n                                infosup: type.infosup,\r\n                                etatdemande: type.etatdemande,\r\n                                tokencom: type.tokencom,\r\n                            }\r\n                        });\r\n                        this.listedepositsencours = this.listedeposits.filter(opt => opt.etatdemande!=3);\r\n                        this.listedepositsvalide = this.listedeposits.filter(opt => opt.etatdemande==3);\r\n                    }\r\n                },\r\n                error => alert(error),\r\n                () => this.loading_data = false\r\n            );\r\n    }\r\n\r\n    getDemandeDepotEncoursForCom(){\r\n        console.log('getDemandeDepotEncoursForCom');\r\n        this._suivipositionnementService.getDemandeDepotEncoursForCom()\r\n            .subscribe(\r\n                data => {\r\n                    if(data.errorCode==0){\r\n                        this.listedeposits = data.message.map(function(type){\r\n                            return {\r\n                                datedemande: type.datedemande,\r\n                                adressecomplet: JSON.parse(type.initiateur.adresse).address+\", \"+JSON.parse(type.initiateur.adresse).souszone+\", \"+JSON.parse(type.initiateur.adresse).zone,\r\n                                montantdemande: type.montantdemande,\r\n                                telephone: type.initiateur.telephone,\r\n                                initiateur: type.initiateur.prenom+' '+type.initiateur.nom,\r\n                                infosup: type.infosup,\r\n                                cc: JSON.parse(type.validateur).prenom+\" \"+JSON.parse(type.validateur).nom,\r\n                                etatdemande: type.etatdemande,\r\n                                tokencom: type.tokencom,\r\n                            }\r\n                        });\r\n                        this.listedepositsencours = this.listedeposits.filter(opt => opt.etatdemande!=3);\r\n                    }\r\n                },\r\n                error => alert(error),\r\n                () => this.loading_data = false\r\n            );\r\n    }\r\n\r\n    validerRecuDepotCom(item){\r\n        if(confirm(\"Confirmer l'affectation\")){\r\n            console.log(\"je confirme\")\r\n            this.loading_data = true;\r\n            clearInterval(this.killsetinterval);\r\n            this._suivipositionnementService.validerRecuDepotCom({montantdemande: item.montantdemande, tokencom: item.tokencom})\r\n                .subscribe(\r\n                    data => {\r\n                        this.listedepositsencours = this.listedeposits.filter(opt => opt.etatdemande!=3 && opt.tokencom!=item.tokencom);\r\n                        this.getDemandeDepotForCom();\r\n                    },\r\n                    error => alert(error),\r\n                    () => {\r\n                        this.killsetinterval = setInterval(() => {\r\n                            this.getDemandeDepotEncoursForCom();\r\n                            console.log('step valide');\r\n                        }, 20000);\r\n                    }\r\n                );\r\n        }\r\n        else{\r\n            console.log(\"Je ne confirme pas\")\r\n        }\r\n    }\r\n\r\n    confirmerAffectationDepotCom(item){\r\n        if(confirm(\"Confirmer l'affectation\")){\r\n            console.log(\"je confirme\")\r\n            this.loading_data = true;\r\n            clearInterval(this.killsetinterval);\r\n            this._suivipositionnementService.confirmerAffectationDepotCom({datedemande: item.datedemande, montantdemande: item.montantdemande, tokencom: item.tokencom})\r\n                .subscribe(\r\n                    data => {\r\n                        this.getDemandeDepotEncoursForCom();\r\n                    },\r\n                    error => alert(error),\r\n                    () => {\r\n                        this.killsetinterval = setInterval(() => {\r\n                            this.getDemandeDepotEncoursForCom();\r\n                            console.log('step confirm affectation');\r\n                        }, 20000);\r\n                    }\r\n                );\r\n        }\r\n        else{\r\n            console.log(\"Je ne confirme pas\")\r\n        }\r\n    }\r\n\r\n    tocurrency(number){\r\n        return Number(number).toLocaleString();\r\n\r\n    }\r\n\r\n    public showModalVoirplusdedemande(content) {\r\n        this.modalService.open(content, {size: \"lg\"}).result.then( (result) => { }, (reason) => {} );\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot.component.ts","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule }   from '@angular/forms';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\n\r\nimport { AgmCoreModule } from '@agm/core';\r\nimport {DataTableModule} from \"angular2-datatable\";\r\nimport { RatingModule } from 'ngx-bootstrap/rating';\r\n\r\n\r\nimport { PageHeaderModule } from './../../shared';\r\n\r\nimport {DemandedepotRoutingModule} from \"./demandedepot-routing.module\";\r\nimport {DemandedepotComponent} from \"./demandedepot.component\";\r\n\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        DemandedepotRoutingModule,\r\n        PageHeaderModule,\r\n        DataTableModule,\r\n        NgbModule.forRoot(),\r\n        AgmCoreModule.forRoot({\r\n\t      apiKey: 'AIzaSyC-2WxSYvBmnQ0HgUYU7fWxCyY_itypwn8'\r\n\t    }),\r\n        RatingModule.forRoot(),\r\n    ],\r\n    declarations: [\r\n        DemandedepotComponent,\r\n    ]\r\n})\r\nexport class DemandedepotsModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// C:/wamp/www/SB-Admin-BS4-Angular-4/src/app/layout/demandedepot/demandedepot.module.ts"],"sourceRoot":"webpack:///"}